<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=../../../images/favicon.png type=image/png><title>Blog 3 :: Báo cáo thực tập</title>
<link href=../../../css/nucleus.css?1765293420 rel=stylesheet><link href=../../../css/fontawesome-all.min.css?1765293420 rel=stylesheet><link href=../../../css/hybrid.css?1765293420 rel=stylesheet><link href=../../../css/featherlight.min.css?1765293420 rel=stylesheet><link href=../../../css/perfect-scrollbar.min.css?1765293420 rel=stylesheet><link href=../../../css/auto-complete.css?1765293420 rel=stylesheet><link href=../../../css/atom-one-dark-reasonable.css?1765293420 rel=stylesheet><link href=../../../css/theme.css?1765293420 rel=stylesheet><link href=../../../css/hugo-theme.css?1765293420 rel=stylesheet><link href=../../../css/theme-workshop.css?1765293420 rel=stylesheet><script src=../../../js/jquery-3.3.1.min.js?1765293420></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../../vi/3-blogstranslated/3.3-blog3/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../../js/lunr.min.js?1765293420></script><script type=text/javascript src=../../../js/auto-complete.js?1765293420></script><script type=text/javascript>var baseurl="https://dokang307.github.io/Internship_Report//vi"</script><script type=text/javascript src=../../../js/search.js?1765293420></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vi/1-worklog/ title="Nhật ký công việc" class=dd-item><a href=../../../vi/1-worklog/><b>1. </b>Nhật ký công việc
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/1-worklog/1.1-week1/ title="Worklog Tuần 1" class=dd-item><a href=../../../vi/1-worklog/1.1-week1/><b>1.1. </b>Worklog Tuần 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.2-week2/ title="Worklog Tuần 2" class=dd-item><a href=../../../vi/1-worklog/1.2-week2/><b>1.2. </b>Worklog Tuần 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.3-week3/ title="Worklog Tuần 3" class=dd-item><a href=../../../vi/1-worklog/1.3-week3/><b>1.3. </b>Worklog Tuần 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.4-week4/ title="Woklog Tuần 4" class=dd-item><a href=../../../vi/1-worklog/1.4-week4/><b>1.4. </b>Woklog Tuần 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.5-week5/ title="Worklog Tuần 5" class=dd-item><a href=../../../vi/1-worklog/1.5-week5/><b>1.5. </b>Worklog Tuần 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.6-week6/ title="Worklog Tuần 6" class=dd-item><a href=../../../vi/1-worklog/1.6-week6/><b>1.6. </b>Worklog Tuần 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.7-week7/ title="Worklog Tuần 7" class=dd-item><a href=../../../vi/1-worklog/1.7-week7/><b>1.7. </b>Worklog Tuần 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.8-week8/ title="Worklog Tuần 8" class=dd-item><a href=../../../vi/1-worklog/1.8-week8/><b>1.8. </b>Worklog Tuần 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.9-week9/ title="Worklog Tuần 9" class=dd-item><a href=../../../vi/1-worklog/1.9-week9/><b>1.9. </b>Worklog Tuần 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.10-week10/ title="Worklog Tuần 10" class=dd-item><a href=../../../vi/1-worklog/1.10-week10/><b>1.10. </b>Worklog Tuần 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.11-week11/ title="Worklog Tuần 11" class=dd-item><a href=../../../vi/1-worklog/1.11-week11/><b>1.11. </b>Worklog Tuần 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.12-week12/ title="Worklog Tuần 12" class=dd-item><a href=../../../vi/1-worklog/1.12-week12/><b>1.12. </b>Worklog Tuần 12
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/2-proposal/ title="Bản đề xuất" class=dd-item><a href=../../../vi/2-proposal/><b>2. </b>Bản đề xuất
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/ title="Các bài blogs đã dịch" class="dd-item
parent"><a href=../../../vi/3-blogstranslated/><b>3. </b>Các bài blogs đã dịch
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../../vi/3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../../vi/3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.3-blog3/ title="Blog 3" class="dd-item
active"><a href=../../../vi/3-blogstranslated/3.3-blog3/><b>3.2. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/4-eventparticipated/ title="Các sự kiện đã tham gia" class=dd-item><a href=../../../vi/4-eventparticipated/><b>4. </b>Các sự kiện đã tham gia
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../../vi/4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../../vi/4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.3-event3/ title="Event 3" class=dd-item><a href=../../../vi/4-eventparticipated/4.3-event3/><b>4.3. </b>Event 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.4-event4/ title="Event 4" class=dd-item><a href=../../../vi/4-eventparticipated/4.4-event4/><b>4.4. </b>Event 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.5-event5/ title="Event 5" class=dd-item><a href=../../../vi/4-eventparticipated/4.5-event5/><b>4.5. </b>Event 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.6-event6/ title="Event 6" class=dd-item><a href=../../../vi/4-eventparticipated/4.6-event6/><b>4.6. </b>Event 6
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/ title=Workshop class=dd-item><a href=../../../vi/5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.1-workshop-overview/ title="Tổng quan Workshop" class=dd-item><a href=../../../vi/5-workshop/5.1-workshop-overview/><b>5.1. </b>Tổng quan Workshop
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.2-prerequiste/ title="Chuẩn bị" class=dd-item><a href=../../../vi/5-workshop/5.2-prerequiste/><b>5.2. </b>Chuẩn bị
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-s3-vpc/ title="VPC & Amazon RDS" class=dd-item><a href=../../../vi/5-workshop/5.3-s3-vpc/><b>5.3. </b>VPC & Amazon RDS
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.3-s3-vpc/5.3.1-create-gwe/ title="Tạo VPC" class=dd-item><a href=../../../vi/5-workshop/5.3-s3-vpc/5.3.1-create-gwe/><b>5.3.1. </b>Tạo VPC
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-s3-vpc/5.3.2-test-gwe/ title="Tạo Amazon RDS" class=dd-item><a href=../../../vi/5-workshop/5.3-s3-vpc/5.3.2-test-gwe/><b>5.3.2. </b>Tạo Amazon RDS
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/ title="Lambda & API Gateway" class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/><b>5.4. </b>Lambda & API Gateway
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/5.4.1-prepare/ title="Tạo Lambda Functions" class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/5.4.1-prepare/><b>5.4.1. </b>Tạo Lambda Functions
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/ title="Tạo API Gateway" class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/><b>5.4.2. </b>Tạo API Gateway
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/ title="Test API Endpoints" class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/><b>5.4.3. </b>Test API Endpoints
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/ title="Cấu hình CORS & Security" class=dd-item><a href=../../../vi/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/><b>5.4.4. </b>Cấu hình CORS & Security
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/5.5-policy/ title="S3, CloudFront & Amplify" class=dd-item><a href=../../../vi/5-workshop/5.5-policy/><b>5.5. </b>S3, CloudFront & Amplify
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.6-cleanup/ title="CI/CD, CloudWatch & Dọn dẹp" class=dd-item><a href=../../../vi/5-workshop/5.6-cleanup/><b>5.6. </b>CI/CD, CloudWatch & Dọn dẹp
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/6-self-evaluation/ title="Tự đánh giá" class=dd-item><a href=../../../vi/6-self-evaluation/><b>6. </b>Tự đánh giá
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/7-feedback/ title="Chia sẻ, đóng góp ý kiến" class=dd-item><a href=../../../vi/7-feedback/><b>7. </b>Chia sẻ, đóng góp ý kiến
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://dokang307.github.io/Internship_Report/3-blogstranslated/3.3-blog3/>English</option><option id=vi value=https://dokang307.github.io/Internship_Report/vi/3-blogstranslated/3.3-blog3/ selected>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../../vi/>Báo cáo thực tập</a> > <a href=../../../vi/3-blogstranslated/>Các bài blogs đã dịch</a> > Blog 3</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#kiến-trúc-giải-pháp>Kiến trúc giải pháp</a></li><li><a href=#điều-kiện-tiên-quyết>Điều kiện tiên quyết</a></li><li><a href=#hướng-dẫn-triển-khai>Hướng dẫn triển khai</a><ul><li><a href=#1-thiết-lập-cấu-hình-okta>1. Thiết lập cấu hình Okta</a></li><li><a href=#2-triển-khai-giải-pháp-toolkit>2. Triển khai giải pháp toolkit</a></li><li><a href=#3-định-nghĩa-idp>3. Định nghĩa IdP</a></li><li><a href=#4-định-nghĩa-một-người-dùng>4. Định nghĩa một người dùng</a></li><li><a href=#5-kiểm-thử-idp>5. Kiểm thử IdP</a></li></ul></li><li><a href=#dọn-dẹp>Dọn dẹp</a></li><li><a href=#kết-luận>Kết luận</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 3</h1><div class="notices warning"><p>⚠️ <strong>Lưu ý:</strong> Các thông tin dưới đây chỉ nhằm mục đích tham khảo, vui lòng <strong>không sao chép nguyên văn</strong> cho bài báo cáo của bạn kể cả warning này.</p></div><h1 id=triển-khai-okta-làm-nhà-cung-cấp-danh-tính-tùy-chỉnh-cho-aws-transfer-family>Triển khai Okta làm nhà cung cấp danh tính tùy chỉnh cho AWS Transfer Family</h1><p><strong>Bởi:</strong> Yongki Kim và Tamelly Lim
<strong>Ngày:</strong> 11 THÁNG 8, 2025
<strong>Chuyên mục:</strong> <a href=https://aws.amazon.com/blogs/storage/category/migration/aws-transfer-family/>AWS Transfer Family</a>, <a href=https://aws.amazon.com/blogs/storage/category/storage/>Storage</a>, <a href=https://aws.amazon.com/blogs/storage/category/post-types/technical-how-to/>Technical How-to</a>, <a href=https://aws.amazon.com/blogs/storage/deploy-okta-as-a-custom-identity-provider-for-aws-transfer-family/>Permalink</a> | <a href=https://aws.amazon.com/blogs/storage/deploy-okta-as-a-custom-identity-provider-for-aws-transfer-family/#Comments>Comments</a> | <a href=https://aws.amazon.com/vi/blogs/storage/deploy-okta-as-a-custom-identity-provider-for-aws-transfer-family/>Share</a></p><hr><p>Khi các dự án và số lượng người dùng trong một tổ chức ngày càng tăng, việc quản lý quyền truy cập chi tiết cho tài nguyên dữ liệu đồng thời tuân thủ các quy định bảo mật trở nên vô cùng quan trọng. Môi trường nhiều người dùng yêu cầu phải phân quyền truy cập phù hợp để đảm bảo tính riêng tư và an toàn dữ liệu.</p><p>Tuy nhiên, quản lý quyền truy cập cho tài liệu chia sẻ có thể phức tạp và tốn thời gian, đặc biệt khi số lượng người dùng ngày càng nhiều và phân tán trên nhiều nhà cung cấp danh tính (identity providers) khác nhau. Các tổ chức cần một giải pháp có khả năng mở rộng để thực thi kiểm soát truy cập chi tiết, xác định người dùng nào có thể truy cập dữ liệu nhạy cảm, và đảm bảo mức độ truy cập phù hợp đối với tệp chia sẻ — từ đó giảm rủi ro truy cập trái phép.</p><p><a href=https://aws.amazon.com/aws-transfer-family/>AWS Transfer Family</a> là dịch vụ được quản lý đầy đủ cho phép bạn truyền tải tệp vào và ra khỏi các dịch vụ lưu trữ AWS như <a href=https://aws.amazon.com/s3/>Amazon S3</a> và <a href=https://aws.amazon.com/efs/>Amazon EFS</a> mà không cần quản lý bất kỳ máy chủ SFTP nào. Dịch vụ này cũng hỗ trợ tích hợp các nhà cung cấp danh tính như Okta, giúp quản lý người dùng cuối có thể trao đổi tệp thông qua AWS managed SFTP server.</p><p>Trong một bài viết trước trên blog Storage, chúng tôi đã giới thiệu <a href=https://docs.aws.amazon.com/transfer/latest/userguide/custom-idp-intro.html>AWS Transfer Family Custom IdP solution</a>, nhằm cung cấp các thành phần có thể tái sử dụng và ví dụ để đơn giản hóa việc thiết lập Transfer Family cho các kịch bản phổ biến, cũng như cách sử dụng nó với Microsoft Active Directory authentication.</p><p>Trong bài viết này, chúng tôi sẽ hướng dẫn triển khai một giải pháp Identity Provider (IdP) tùy chỉnh với Okta, cho phép các tổ chức sử dụng xác thực Okta cho máy chủ Transfer Family của họ. Bạn có thể sử dụng các tính năng tích hợp sẵn của giải pháp Custom IdP, chẳng hạn như phân quyền theo từng người dùng (per-user permissions).</p><h2 id=kiến-trúc-giải-pháp>Kiến trúc giải pháp</h2><p>Kiến trúc được đề xuất cung cấp một nền tảng có thể tái sử dụng và thể hiện các best practices trong việc triển khai IdP tùy chỉnh, đồng thời cho phép kiểm soát chi tiết cấu hình phiên theo từng người dùng, như minh họa trong hình sau. Kiến trúc dạng mô-đun này thúc đẩy khả năng tái sử dụng mã, dễ bảo trì và khả năng mở rộng. Điều này giúp dễ dàng thích ứng với yêu cầu thay đổi hoặc tích hợp với các hệ thống khác.</p><p>Theo chuẩn, kiến trúc này cung cấp các tính năng sau:</p><ul><li>Một sơ đồ chuẩn trong <a href=https://aws.amazon.com/dynamodb/>Amazon DynamoDB</a> để lưu trữ metadata về các nhà cung cấp danh tính, cài đặt liên quan, thông tin đăng nhập của người dùng, và cấu hình phiên của người dùng như HomeDirectoryDetails, Role, và Policy.</li><li>Hỗ trợ nhiều IdP kết nối đến một máy chủ Transfer Family.</li><li>Hỗ trợ nhiều máy chủ Transfer Family sử dụng cùng một lần triển khai giải pháp này.</li><li>Hỗ trợ các nhà cung cấp danh tính sau: Okta, LDAP (bao gồm Microsoft Active Directory), Entra ID, Argon2, Cognito, Public and Private Key, và <a href=https://aws.amazon.com/secrets-manager/>AWS Secrets Manager</a>.</li><li>Danh sách cho phép IP theo từng người dùng (Per user IP allow-listing).</li><li>Mẫu logging theo best practice đã chuẩn hóa, với khả năng cấu hình log-level và hỗ trợ tracing.</li><li>Khả năng triển khai <a href=https://aws.amazon.com/api-gateway/>Amazon API Gateway</a> cho các trường hợp nâng cao.</li></ul><p><img alt="Hình 1: Kiến trúc giải pháp nhà cung cấp danh tính (Identity Provider) tùy chỉnh" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcMtdFqbk3vX5JgjVJsbTTNRCgwrKwii4saqjbeOwqwF2RvFKKEfKzii2yzOPXchQLueU1hNCL9_sfwV32TDCkdKHPEO36Mv7W54Z1einlJfru53LQZj1n34HBOIHslRvK8GCnf-A?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 1: Kiến trúc giải pháp nhà cung cấp danh tính (Identity Provider) tùy chỉnh</em></p><p>Trong ví dụ này, chúng ta sẽ đi qua các bước triển khai và cấu hình Okta làm nhà cung cấp danh tính tùy chỉnh (custom IdP) cho AWS Transfer Family.</p><h2 id=điều-kiện-tiên-quyết>Điều kiện tiên quyết</h2><p>Các điều kiện tiên quyết sau là cần thiết để triển khai giải pháp này:</p><ol><li>Một tài khoản AWS có quyền truy cập vào <a href=https://aws.amazon.com/cloudshell/>AWS CloudShell</a>.</li><li>Quyền phù hợp trong <a href=https://aws.amazon.com/iam/>AWS Identity and Access Management (IAM)</a> để cung cấp các loại tài nguyên sau:<ul><li>Tạo IAM roles</li><li>Tạo DynamoDB tables</li><li>Tạo <a href=https://aws.amazon.com/lambda/>AWS Lambda</a> functions</li><li>Tạo API Gateway (nếu được bật)</li></ul></li><li>Một <a href=https://developer.okta.com/docs/concepts/okta-organizations/>Okta organization</a>.</li></ol><h2 id=hướng-dẫn-triển-khai>Hướng dẫn triển khai</h2><p>Trong giải pháp này, chúng tôi minh họa một trường hợp sử dụng khi một tổ chức cần xác thực Okta kèm MFA dựa trên TOTP (time-based one-time password) cho máy chủ Transfer Family của họ. Tổ chức cần sự linh hoạt để gán cho mỗi người dùng một cấu hình phiên Transfer Family riêng, chẳng hạn như Role, HomeDirectoryDetails và PosixProfile.</p><p>Trong walkthrough này, chúng tôi sẽ bao gồm các bước sau:</p><ol><li><strong>Thiết lập cấu hình Okta:</strong><ul><li>Tạo người dùng và nhóm mới trong Okta</li><li>Cấu hình MFA</li></ul></li><li><strong>Triển khai bộ công cụ (Deploying the toolkit):</strong><ul><li>Thiết lập custom IdP</li><li>Cung cấp tất cả tài nguyên cần thiết cho giải pháp này</li></ul></li><li><strong>Định nghĩa IdP và người dùng (Defining the IdP and user):</strong><ul><li>Cấu hình cài đặt IdP</li><li>Quản lý bản ghi người dùng trong IdP</li></ul></li><li><strong>Kiểm thử IdP (Testing the IdP):</strong><ul><li>Xác minh chức năng của giải pháp đã triển khai</li></ul></li></ol><hr><h3 id=1-thiết-lập-cấu-hình-okta>1. Thiết lập cấu hình Okta</h3><p>Trong phần này, bạn sẽ tạo một người dùng và một nhóm mới trong tổ chức Okta, đồng thời cấu hình MFA.</p><p><img alt="Hình 2: Bảng điều khiển quản trị Okta cho Okta Identity Engine" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcqhN_SdSKgjy-6vDoFGHjqOutlhkzMYbtSSRRgJ69frblIQWwqDNsqyAgsoOg9ZCp6AOl72Go58JM4J931fcpMyyi8SJdx1bm0KIeAFFGUb-KlEZuJbjA2wjKmBsHZMIFVhX-pgw?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 2: Bảng điều khiển quản trị Okta cho Okta Identity Engine</em></p><p><em>Lưu ý: Các hướng dẫn này áp dụng riêng cho Okta Identity Engine. Nếu bạn đang sử dụng Okta Classic, thì giao diện và một số thiết lập sẽ khác biệt.</em></p><ol><li><p>Đăng nhập vào tổ chức Okta với vai trò quản trị viên bằng bảng điều khiển quản trị (ví dụ: <code>dev-xxxx-admin.okta.com/admin</code>).</p><p><img alt="Hình 3: Thêm người dùng trong bảng điều khiển quản trị Okta" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXczttsk2zYAMoOHHQt-S4NNh0F2eoWZbqRWPi2YZ1SlJvKl8vadYMwy10b48a6VpQ6XmrtrdquNgO1-cbgkTDIPeG-Kbh_-aBvRk4wSn6hkxDiZDCNzcOZMBabPlWoabajGgODjLQ?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 3: Thêm người dùng trong bảng điều khiển quản trị Okta</em></p></li><li><p>Điều hướng đến <strong>Directory</strong> ở thanh bên, chọn <strong>People</strong> và tạo một người dùng Okta với tên đăng nhập <code>john@demosftp.com</code>. Đặt mật khẩu mong muốn cho người dùng này.</p></li><li><p>Trong cùng tab <strong>Directory</strong>, chọn <strong>Groups</strong>, nhấp <strong>Add group</strong>, và tạo một nhóm Okta với tên <code>sftp</code>.</p></li><li><p>Chọn nhóm vừa tạo, sau đó chọn <strong>Assign people</strong> và thêm <code>john@demosftp.com</code> bằng cách chọn dấu cộng (+) bên cạnh tên của họ.</p><p><img alt="Hình 4: Thêm người dùng vào nhóm sftp trong bảng điều khiển quản trị Okta" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdMZmhaHEzE8J4TtowCnI5QjU624nDnuHQFB3BzQiRuaJlrQH-ExvQQSNeveenPIee8CN7GS3zPwtV1OzxqZekMHHBHeX5M0uSWhG9MIT28_dSMyiWIJ9sceUyM0gOBr69eBAMrnQ?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 4: Thêm người dùng vào nhóm sftp trong bảng điều khiển quản trị Okta</em></p></li><li><p>Điều hướng đến <strong>Security</strong> ở thanh bên và chọn <strong>Authenticators</strong>. Trong tab <strong>Setup</strong>, chọn <strong>Add authenticator</strong> và thêm trình xác thực TOTP mà tổ chức của bạn sử dụng. <em>Lưu ý: Chỉ các trình xác thực dựa trên TOTP mới được hỗ trợ với Transfer Family, các trình xác thực dạng push (push-based) hiện chưa được hỗ trợ.</em> Trong trường hợp này, bạn thêm <strong>Google Authenticator</strong> làm trình xác thực.</p></li><li><p>Để bắt buộc xác thực đa yếu tố (MFA) với Google Authenticator cho người dùng SFTP, điều hướng đến tab <strong>Enrollment</strong> và chọn <strong>Add a policy</strong>. Nhập các thông tin sau:</p><ul><li><strong>Policy name:</strong> SFTP Users MFA</li><li><strong>Assign to groups:</strong> SFTP</li><li><strong>Authenticators:</strong> Chuyển Google Authenticator thành <strong>Required</strong>.</li><li>Chọn <strong>Create policy</strong>. Trong hộp thoại <em>Add Rule</em> xuất hiện, đặt <strong>Rule name</strong> là <code>SFTP Users MFA Enrollment</code> và chọn <strong>Create rule</strong>.</li></ul></li><li><p>Để bắt buộc MFA cho các phiên SFTP của người dùng, điều hướng đến <strong>Security</strong> ở thanh bên và đi đến <strong>Global Session Policy</strong>. Chọn <strong>Add policy</strong> và đặt <strong>Policy name</strong> thành <code>sftp policy</code>. Trong mục <strong>Assign to groups</strong>, thêm <code>sftp</code>, sau đó chọn <strong>Create policy</strong> và <strong>Add rule</strong>.</p></li><li><p>Trong hộp thoại <em>Add Rule</em> xuất hiện, đặt <strong>Rule name</strong> là <code>sftp rule</code>. Đặt <strong>Multifactor authentication (MFA)</strong> thành <strong>Required</strong>, sau đó chọn <strong>Create rule</strong>.</p></li><li><p>Để hoàn tất việc thiết lập Google Authenticator cho người dùng Okta, đăng nhập vào miền Okta với tư cách người dùng <code>john@demosftp.com</code>. Mở một cửa sổ duyệt web riêng tư (private browsing) và điều hướng đến URL của tổ chức Okta (ví dụ: <code>dev-xxxx.okta.com</code>). Tại màn hình đăng nhập, nhập <code>john@demosftp.com</code> và mật khẩu đã tạo ở Bước 1.2. Khi được nhắc, chọn <strong>Set up</strong> dưới mục Google Authenticator và làm theo hướng dẫn để hoàn tất cài đặt. Bạn chỉ cần cấu hình phương thức Google Authenticator. Sau khi hoàn tất, bạn có thể bỏ qua các phương thức MFA khác và chọn <strong>Continue</strong> để tiếp tục đăng nhập.</p><p><img alt="Hình 5: Thiết lập MFA cho một người dùng Okta" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcteOeCl8hnVbCX1LPQm78rs9F1-FZ0D7hBKxerkzuboqfxl-TjyNx6aQfqUWcY9yInTDGPDTrHLvrFwRLhjzWJ42FkrwgD0ezTiZYKKSH2yW622MRv5xNmHSc8maT4M5VD4eh1Vg?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 5: Thiết lập MFA cho một người dùng Okta</em></p></li></ol><p><em>Lưu ý: Bạn đã thêm thành công một người dùng Okta vào nhóm mới tạo và cũng đã thiết lập MFA cho việc xác thực. Trước khi tiến hành giải pháp, người dùng Okta mới được tạo phải đăng nhập vào miền Okta để xác thực và thiết lập mật khẩu mới.</em></p><h3 id=2-triển-khai-giải-pháp-toolkit>2. Triển khai giải pháp toolkit</h3><p>Đăng nhập vào tài khoản AWS mà bạn muốn triển khai giải pháp, chuyển sang AWS Region mong muốn để chạy Transfer Family, và khởi động một phiên CloudShell.</p><ol><li><p>Chạy lệnh sau để clone (sao chép) kho lưu trữ của giải pháp vào môi trường CloudShell của bạn:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~
</span></span><span style=display:flex><span>git clone https://github.com/aws-samples/toolkit-for-aws-transfer-family.git
</span></span></code></pre></div></li><li><p>Chạy lệnh sau để thực thi build script, lệnh này sẽ tải xuống tất cả các gói phụ thuộc và tạo các tệp nén (archives) cho Lambda layer và function được sử dụng trong giải pháp:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/toolkit-for-aws-transfer-family/solutions/custom-idp
</span></span><span style=display:flex><span>./build.sh
</span></span></code></pre></div><p><em>Theo dõi quá trình thực thi và xác minh rằng script đã hoàn tất thành công.</em></p></li><li><p>Triển khai stack bằng SAM:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sam deploy --guided --template <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>./examples/okta/transfer_okta_customIdp_server_template.yaml --<span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>capabilities CAPABILITY_IAM CAPABILITY_AUTO_EXPAND<span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>CAPABILITY_NAMED_IAM --disable-rollback
</span></span></code></pre></div></li><li><p>Khi được nhắc, hãy cung cấp các thông tin sau như ví dụ:</p><ul><li><strong>Stack Name:</strong> <code>transferidp</code></li><li><strong>Parameter UserNameDelimiter:</strong> <code>@@</code></li><li><strong>Parameter LogLevel:</strong> <code>INFO</code></li><li><strong>Parameter ProvisionApi:</strong> <code>false</code></li><li><strong>Parameter EnableTracing:</strong> <code>false</code></li><li><strong>Parameter UsersTableName:</strong> <code>empty</code></li><li><strong>Parameter IdentityProvidersTableName:</strong> <code>empty</code></li><li>Đối với các tùy chọn khác, nhập <code>Y</code> để giữ nguyên giá trị mặc định.</li></ul><p><img alt="Hình 7: Triển khai AWS CloudFormation cho custom IdP" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcgPEP4HDdSgoQsmgz1g8hobs2bE_e28nM9nibvzPK-CoEUKYLp1rGjzbIRvmDKlcOMIrwRbDhAjoi0BaVK_WunZAFyHEz8XkBG5Hecnn1PtXsfYytt59_hfPHd1uQ6AKrQaFFWkQ?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 7: Triển khai AWS CloudFormation cho custom IdP</em></p></li><li><p>Khi quá trình triển khai hoàn tất thành công, hãy sao chép/dán các <strong>AWS CloudFormation outputs</strong> từ stack vừa được triển khai sang một trình soạn thảo văn bản và lưu lại để sử dụng về sau.</p><p><strong>Các thông tin đầu ra bao gồm:</strong></p><ul><li><strong>DDBIdentityProvidersTableName:</strong> Tên bảng DynamoDB Identity Providers</li><li><strong>DDBUsersTableName:</strong> Tên bảng DynamoDB Users</li><li><strong>SFTPServerS3Bucket:</strong> Tên S3 bucket được tạo để làm bộ nhớ backend cho Transfer Family server</li><li><strong>TransferUserRole:</strong> Amazon Resource Name (ARN) của IAM Role được tạo để ánh xạ đến người dùng</li><li><strong>TransferServerEndpoint:</strong> Endpoint (điểm cuối) của Transfer Family server</li></ul></li></ol><h3 id=3-định-nghĩa-idp>3. Định nghĩa IdP</h3><p>Khi giải pháp Transfer Family custom IdP được triển khai, bạn cần định nghĩa một hoặc nhiều IdP trong bảng <code>identity_providers</code> của DynamoDB. Để sử dụng Okta làm IdP, bạn cần thêm các thuộc tính Okta vào bảng này.</p><table><thead><tr><th style=text-align:left>Table name</th><th style=text-align:left>Comment</th></tr></thead><tbody><tr><td style=text-align:left><code>[StackName]-CustomIdP-XXXX_identity_providers</code></td><td style=text-align:left>Bảng DynamoDB chứa chi tiết của từng Transfer Family custom IdP (ví dụ: tên IdP, server URL, các tham số).</td></tr><tr><td style=text-align:left><code>[StackName]-CustomIdP-XXXX_users</code></td><td style=text-align:left>Bảng DynamoDB chứa chi tiết của từng Transfer Family user (ví dụ: IdP được sử dụng, IAM role, danh sách thư mục logic).</td></tr></tbody></table><ol><li><p>Trong AWS Management Console, điều hướng đến DynamoDB Item Explorer và chọn bảng <code>identity_providers</code> trong menu chọn bảng. Chọn <strong>Create item</strong>.</p><p><img alt="Hình 8: Bảng DynamoDB cho custom IdP" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXefWm0xJf3OORTJhxUN4n27GQ1-vp4AqGv2zVfAN9yQs4MrEnWYgYJLOPtWtREwYzECBSGy33MHulcsUUiJG4lLo0BxqAY37vZdMbpTtgHlZkPzITgwEjQFWXlp60ZOADFAY3M7eg?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 8: Bảng DynamoDB cho custom IdP</em></p></li><li><p>Trong màn hình Create item, chọn <strong>JSON view</strong>, sau đó sao chép và dán bản ghi sau:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;provider&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;S&#34;</span>: <span style=color:#e6db74>&#34;okta&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;config&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;M&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;mfa&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;BOOL&#34;</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;okta_domain&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;S&#34;</span>: <span style=color:#e6db74>&#34;[OKTA DOMAIN]&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;module&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;S&#34;</span>: <span style=color:#e6db74>&#34;okta&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>Chọn nút <strong>Form</strong> để chuyển về chế độ xem form. Thay thế giá trị placeholder trong trường <code>okta_domain</code> bằng tên miền của tổ chức Okta của bạn (ví dụ: <code>dev-xxxxx.okta.com</code>).</p><p><img alt="Hình 9: Tạo bản ghi IdP trong DynamoDB" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcfLnVcbq-JdapL1tmqclvLT-7uJw81PsHoxklo_pxnxSTI_RaO9xhcvNKd6kgY-4XEophitLg_mRixfqw4lkULUu0qi26ydEJtzEjrETsL88BXgHacRRx0Cg7_vpJaEvZSLNaj4g?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 9: Tạo bản ghi IdP trong DynamoDB</em></p><ul><li><strong>provider:</strong> Tên của IdP (ví dụ: <code>okta</code>).</li><li><strong>module:</strong> Tên module IdP cần sử dụng (<code>okta</code>).</li><li><strong>config:</strong> Chứa chi tiết cấu hình. <code>mfa</code> đặt là <code>true</code> nghĩa là người dùng cần nhập password + mã TOTP.</li></ul></li><li><p>Chọn <strong>Create item</strong>.</p></li></ol><h3 id=4-định-nghĩa-một-người-dùng>4. Định nghĩa một người dùng</h3><p>Tiếp theo, bạn cần định nghĩa người dùng và ánh xạ tên người dùng đó đến IdP Okta vừa tạo.</p><ol><li><p>Trong console, điều hướng đến DynamoDB Item Explorer, chọn bảng <code>users</code> (ví dụ: <code>[StackName]-CustomIdP-XXXX_users</code>). Chọn nút <strong>Create item</strong>.</p><p><img alt="Hình 10: Bảng DynamoDB cho users" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdmnXmED6yoRn2CShfnghH5buN4o29DkJy07xWwfr5DGjgOhr28mInBIZ0aO40EbPwjp7Qs7JmxmGHGUmY9CSRBwFyyALZVKuijjaeD-fZSZaKPh2Mjk2pbymnZssxKG67zcWMX?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 10: Bảng DynamoDB cho users</em></p></li><li><p>Trong màn hình Create item, chọn <strong>JSON view</strong>, sau đó sao chép và dán bản ghi sau:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;user&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;S&#34;</span>: <span style=color:#e6db74>&#34;john@demosftp.com&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;identity_provider_key&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;S&#34;</span>: <span style=color:#e6db74>&#34;okta&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;config&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;M&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;HomeDirectoryDetails&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;L&#34;</span>: [
</span></span><span style=display:flex><span>          {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;M&#34;</span>: {
</span></span><span style=display:flex><span>              <span style=color:#f92672>&#34;Entry&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;S&#34;</span>: <span style=color:#e6db74>&#34;/&#34;</span>
</span></span><span style=display:flex><span>              },
</span></span><span style=display:flex><span>              <span style=color:#f92672>&#34;Target&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;S&#34;</span>: <span style=color:#e6db74>&#34;/[SFTPServerS3Bucket]/${transfer:UserName}&#34;</span>
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;HomeDirectoryType&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;S&#34;</span>: <span style=color:#e6db74>&#34;LOGICAL&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Role&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;S&#34;</span>: <span style=color:#e6db74>&#34;[TransferUserRole]&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>Chọn nút <strong>Form</strong>. Mở rộng phần <code>config</code> và thay thế <code>[SFTPServerS3Bucket]</code> và <code>[TransferUserRole]</code> bằng các giá trị CloudFormation outputs tương ứng ở Bước 2.5.</p><p><img alt="Hình 11: Tạo bản ghi người dùng trong DynamoDB" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcu2nZuDcClUIyqF-hLHdf0KxK9L1B4L0GdD4yLJdyJRf0mnA_DHJzAvsnDAuzWoazdZImn6EtVmH_TYx5Q0fHyH6nZFLDBeMar1Smpkic1Q6CeQ70BVrgpGIZMy2xKUd5rFLbpTQ?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 11: Tạo bản ghi người dùng trong DynamoDB</em></p></li><li><p>Chọn <strong>Create item</strong>.</p></li></ol><h3 id=5-kiểm-thử-idp>5. Kiểm thử IdP</h3><ol><li><p>Điều hướng đến AWS Transfer Family console và chọn server đã được triển khai.</p></li><li><p>Ở góc trên bên phải, chọn <strong>Actions</strong>, sau đó chọn <strong>Test</strong> từ menu thả xuống.</p><p><img alt="Hình 12: Kiểm thử quyền truy cập SFTP" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfmdHjecbWuyso3osbbhdURE2ha7T3NxPfEHvH9Q6Rj8rgNR3EM1JZRMKZTsstL1-vGpl3f9OVUYLhMaSj5OWzC7isRIW7ACOKR3S9rnoOVFAhx3ObjztsqinxoaaCPBL3G7f6moA?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 12: Kiểm thử quyền truy cập SFTP</em></p></li><li><p>Nhập <code>john@demosftp.com</code> vào trường <strong>username</strong>. Đối với trường <strong>password</strong>, nhập mật khẩu của bạn nối tiếp với mã TOTP từ Google Authenticator (Ví dụ: nếu mật khẩu là <code>TestP@55w0rd</code> và mã MFA là <code>201483</code>, nhập <code>TestP@55w0rd201483</code>). <strong>Source IP</strong> có thể là bất kỳ giá trị nào. Chọn <strong>Test</strong>.</p><p><img alt="Hình 13: Kiểm thử xác thực với mã MFA" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXd7QHH1_ceUh393j-jAbXVGf8Tq60jlvVbSH6PppKhLoDUuzxA1rJpvJYkVAy5CpMCVd_56jc6WVIHYCpAi3MUgAOtnx2p61AqLcnBTkpzdFWmU30i3gl8oBrWPrfkjqp7yw7_seg?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 13: Kiểm thử xác thực với mã MFA</em></p></li><li><p>Nếu thành công, phản hồi HTTP 200 sẽ được trả về. Sau đó, bạn có thể kết nối đến máy chủ Transfer Family thông qua một client SFTP bằng cách sử dụng <code>TransferServerEndpoint</code> từ CloudFormation output.</p><p><img alt="Hình 14: Kiểm thử với lệnh SFTP" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdRynxVJXo9ivmL07BsOj3OIwVwKgGX1txl1Xs9x43MJaLvNZfhrVkcGweo_q_icGDn98WW4l0Z4zhU4C-f9lBUEvp1LqE_W_ZeoyfRx11BAge4ABaYytt_pPMT7H9AtqDuU9wPiw?key=R4ysRt4XoNv_sIjTNMv9AA">
<em>Hình 14: Kiểm thử với lệnh SFTP (lưu ý sử dụng định dạng &ldquo;user@domain&rdquo; trong dấu ngoặc kép nếu cần)</em></p></li></ol><h2 id=dọn-dẹp>Dọn dẹp</h2><p>Để xóa các tài nguyên đã tạo:</p><ol><li>Chạy lệnh: <code>sam delete --stack-name &lt;stack-name></code></li><li>Xóa thủ công hai bảng DynamoDB (<code>identity_providers</code> và <code>users</code>) trong console.</li><li>Xóa thủ công AWS Lambda Layer (<code>handler-layer</code>) trong console.</li></ol><h2 id=kết-luận>Kết luận</h2><p>Việc chuẩn hóa quy trình triển khai trên nhiều IdP khác nhau giúp cải thiện khả năng tương tác và nâng cao hiệu quả quản lý. Trong bài viết này, chúng tôi đã hướng dẫn cách triển khai Okta làm custom IdP cho AWS Transfer Family, tích hợp MFA để tăng cường bảo mật. Bạn có thể tham khảo thêm về giải pháp và các mô-đun khác (như Active Directory, Entra ID, Cognito) trong <a href=https://github.com/aws-samples/toolkit-for-aws-transfer-family>GitHub toolkit repository</a>.</p><p><strong>TAGS:</strong> AWS Storage Blog, AWS Transfer Family</p><hr><p><strong>Về tác giả:</strong></p><p><strong>Yongki Kim</strong>
Yongki là một APJ Storage Specialist Solutions Architect với chuyên môn sâu rộng về danh mục lưu trữ toàn diện của AWS. Anh đam mê làm việc với khách hàng để giải quyết những thách thức trong kiến trúc.</p><p><strong>Tamelly Lim</strong>
Tamelly là một Specialist Solutions Architect làm việc tại Singapore, hỗ trợ khách hàng thiết kế và triển khai các giải pháp dựa trên AWS. Cô bắt đầu hành trình với đám mây vào năm 2022.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../../vi/3-blogstranslated/3.2-blog2/ title="Blog 2"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../../vi/4-eventparticipated/ title="Các sự kiện đã tham gia" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../../js/clipboard.min.js?1765293420></script><script src=../../../js/perfect-scrollbar.min.js?1765293420></script><script src=../../../js/perfect-scrollbar.jquery.min.js?1765293420></script><script src=../../../js/jquery.sticky.js?1765293420></script><script src=../../../js/featherlight.min.js?1765293420></script><script src=../../../js/highlight.pack.js?1765293420></script><script>hljs.initHighlightingOnLoad()</script><script src=../../../js/modernizr.custom-3.6.0.js?1765293420></script><script src=../../../js/learn.js?1765293420></script><script src=../../../js/hugo-learn.js?1765293420></script><link href=../../../mermaid/mermaid.css?1765293420 rel=stylesheet><script src=../../../mermaid/mermaid.js?1765293420></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>